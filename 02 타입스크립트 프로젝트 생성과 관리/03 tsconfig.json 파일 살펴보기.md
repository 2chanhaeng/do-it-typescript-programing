# tsconfig.json 파일 살펴보기

- [tsconfig.json 파일 살펴보기](#tsconfigjson-파일-살펴보기)

## `module`

`module` 옵션은 JS 컴파일 시 모듈 처리 방식을 지정한다.  
`commonjs` 를 사용하면 비표준 방식인 CommonJS의 `require` 문으로 모듈을 불러오도록 컴파일한다.  
`es2015`, `esnext` 등을 사용하여 표준으로 지정된 ECMAScript 문법으로 컴파일하도록 하자.

## `esModuleInterop`

`esModuleInterop` 옵션은 `module` 옵션을 `es2015` 나 `esnext` 로 설정했을 때, `import` 문으로 CommonJS 모듈을 불러올 수 있도록 해준다.  
일부 JS 개발자들은 브라우저 이외의 런타임에서도 JS를 사용하고 싶어했다.  
하지만 JS는 웹을 위해 만들어진 경량화된 언어였기 때문에 ECMAScript 표준에는 모듈 등의 기능이 없었다.  
이에 CommonJS 등의 비표준적인 시스템이 등장하기 시작했다.  
다행히 2015년에 발표된 ES2015 이후로 `import` 문 등 다양한 기능을 지원하기 시작했다.
따라서 요즘에는 CommonJS 등의 비표준적인 방식을 사용할 필요가 없다.  
하지만 레거시 시스템이나 라이브러리에는 CommonJS 모듈을 사용하는 경우가 종종 있다.  
간혹 가다 옛날에 쓰여진 라이브러리를 사용할 수도 있기 때문에 호환성을 위해 이 옵션을 활성화하는 것이 좋다.

## `target`

`target` 옵션은 컴파일된 JS의 버전을 지정한다.  
`es<버전>` 형식으로 지정하면 해당 버전으로 컴파일한다.  
[node.green](https://node.green/#ES2023)에 따르면 이 글이 쓰여지는 시점의 `lts` 버전인 `18.17.0` 은 `es2023` 의 기능을 대부분 지원한다.  
따라서 `es2023` 이나 그 이하의 버전을 지정해도 무방하다.

## `baseUrl`

`baseUrl` 옵션은 모듈을 불러올 때 기준이 되는 경로를 지정한다.  
보통 `tsconfig.json` 파일이 있는 경로를 기준으로 모듈을 불러오므로 `.`, 즉 현재 디렉터리를 지정한다.

## `outDir`

`outDir` 옵션은 `baseUrl` 을 기준으로 컴파일된 JS 파일이 생성될 경로를 지정한다.  
많은 경우 `dist` 디렉토리를 지정한다.  
해당 디렉토리는 웬만하면 `.gitignore` 에 등록해두자.

## `paths`

`paths` 옵션은 모듈을 불러올 때 사용할 경로를 지정한다.  
`baseUrl` 을 기준으로 상대 경로를 지정하면 된다.  
나는 `"@/*": ["./*"]` 를 자주 사용한다.  
이러면 `import foo from '@/foo'` 와 같이 모듈을 절대경로처럼 불러올 수 있다.  
eslint 에서도 `@` 를 절대경로로 인식하도록 설정하면 편하다.

## `sourceMap`

`sourceMap` 옵션은 컴파일된 JS 파일에 소스맵을 포함할지 여부를 지정한다.  
소스맵 파일은 컴파일된 JS 코드가 TS의 어디에 해당하는 지를 알려주는 디버깅용 파일이다.

## `downlevelIteration`

`downlevelIteration` 옵션은 반복 프로토콜이 제대로 정의되지 않았던 `ES5` 이전 버전에서도 돌아갈 수 있도록 컴파일 하는 옵션이다.  
나는 `ES6` 이상의 문법만 사용하므로 굳이 설정해주지 않았다.

## `noImplicitAny`

any 타입을 허용하지 않는 옵션이다.  
책에서는 TS를 처음 배우는 사람들을 위해 `any` 타입을 허용하도록 설정했다.  
나는 `any` 타입을 쓸거면 TS를 쓸 이유가 없다고 생각한다.  
게다가 예전에 제대로 타입이 정의되지 않은 라이브러리를 쓰다가 오타 하나 못 잡아내서 5시간을 날려먹었던 적이 있다.  
이 경험 이후로 명확한 이유 없이 `any` 타입을 쓰는 것은 중범죄라고 생각한다.  
진짜 그러지 마라.

책에서는 여기까지만 다뤘지만 추가적으로 `tsc --init` 시 생성되는 `tsconfig.json` 파일에는 다음과 같은 옵션들이 활성화되어 있다.

## `strict`

엄밀한 타입 체크를 활성화하는 옵션이다.  
나는 사실 이 옵션의 존재하는 이유를 모르겠다.  
타입 체크 안 할거면 JS 쓰면 되고 엄격하게 타입 체크하고 싶어서 TS 쓰는 거 아닌가?  
~~동적언어만쓰다가타락해버린과격한타입론자~~
아무튼 [`noImplicitAny`](#noimplicitany)에서 말한 느슨한 타입 체크로 고생한 경험 있고 해서 무조건 활성화 하는 옵션 중 하나다.

## `forceConsistentCasingInFileNames`

파일 이름의 대소문자를 일관되게 맞추도록 강제하는 옵션이다.  
몇몇 OS에서는 파일의 대소문자를 구분하지 않는다고 한다.  
이 옵션을 활성화하면 파일 이름의 대소문자를 일관되게 맞춰주므로 OS에 따라서 발생할 수 있는 문제를 방지할 수 있다.

## `skipLibCheck`

`node_modules` 디렉토리에 있는 라이브러리의 타입 체크를 건너뛰는 옵션이다.  
컴파일 속도가 조금 빨라진다고 하는데 사실 마음에 들지는 않는다.  
TS에 대해 더 이해한 뒤에는 이 옵션을 비활성화 해봐야겠다.

## 여담

이외에도 다양한 옵션이 있으나 모든 옵션을 다루기에는 양이 너무 많다.  
따라서 책에서 다룬 내용과 내가 주로 사용하는 옵션들만 다뤄보았다.  
더 많은 옵션이 궁금하다면 [공식 문서](https://www.typescriptlang.org/tsconfig)를 참고하자.  
참고로 `tsc --init` 으로 `tsconfig.json` 파일을 생성하면 상기한 공식 문서 링크가 나와있다.  
게다가 주석으로 옵션들을 짤막하게 잘 설명해놨으니 꼭 확인해보자.
